!function e(t,r,a){function n(c,o){if(!r[c]){if(!t[c]){var i="function"==typeof require&&require;if(!o&&i)return i(c,!0);if(s)return s(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var p=r[c]={exports:{}};t[c][0].call(p.exports,function(e){var r=t[c][1][e];return n(r?r:e)},p,p.exports,e,t,r,a)}return r[c].exports}for(var s="function"==typeof require&&require,c=0;c<a.length;c++)n(a[c]);return n}({"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project-list.cjsx":[function(e,t,r){var a;a=Reflux.createActions(["fetchList","delete","changeCurrent"]),t.exports=a},{}],"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project-modal.cjsx":[function(e,t,r){var a;a=Reflux.createActions(["submit","setCurrentProject","setType","handleName","handleDescription","handleRepo","handleMember","addMember","deleteMember"]),t.exports=a},{}],"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project.cjsx":[function(e,t,r){var a;a=Reflux.createActions(["selectBacklog","setCurrentProject","selectSprints"]),t.exports=a},{}],"/home/xhitedev/cremi/cp/scrumy/app/js/actions/sprint-list.cjsx":[function(e,t,r){var a;a=Reflux.createActions(["handleName","handleDescription","add","setList"]),t.exports=a},{}],"/home/xhitedev/cremi/cp/scrumy/app/js/actions/sprint-modal.cjsx":[function(e,t,r){var a;a=Reflux.createActions(["submit","setCurrentSprint","handleName","handleDate","handleKanban","createKanban","add","edit"]),t.exports=a},{}],"/home/xhitedev/cremi/cp/scrumy/app/js/components/modal-list.cjsx":[function(e,t,r){var a,n,s;n=e("../components/project-modal"),s=e("../components/sprint-modal"),a=React.createClass({displayName:"ModalList",render:function(){return React.createElement("div",null,React.createElement(n,null),React.createElement(s,null))}}),t.exports=a},{"../components/project-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/components/project-modal.cjsx","../components/sprint-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/components/sprint-modal.cjsx"}],"/home/xhitedev/cremi/cp/scrumy/app/js/components/modal.cjsx":[function(e,t,r){var a;a=React.createClass({displayName:"Modal",render:function(){return React.createElement("div",{className:"modal fade",id:this.props.id,role:"dialog","aria-labelledby":"modalLabel"},React.createElement("div",{className:"modal-dialog",role:"document"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",id:"modalLabel"},this.props.title)),React.createElement("div",{className:"modal-body"},this.props.children))))}}),t.exports=a},{}],"/home/xhitedev/cremi/cp/scrumy/app/js/components/project-list.cjsx":[function(e,t,r){var a,n,s,c,o,i,l,p,d;a=e("../actions/project-list"),d=e("../stores/project-list"),i=e("../actions/project-modal"),n=React.createClass({displayName:"AddProject",render:function(){return React.createElement("a",{onClick:i.setType.bind(null,event,"post"),"data-toggle":"modal","data-target":"#addProject",className:"material-icons"},"add")}}),s=React.createClass({displayName:"DeleteConfirm",render:function(){return React.createElement("div",{className:"modal fade",id:"confirmModal"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title"},"Etes-vous sur de vouloir supprimer le projet?")),React.createElement("div",{className:"modal-body"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Non"),React.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.props.handle},"Oui")))))}}),c=React.createClass({displayName:"DeleteProject",render:function(){return React.createElement("span",null,React.createElement("button",{type:"button",className:"btn btn-default"},React.createElement("a",{"data-toggle":"modal","data-target":"#confirmModal",className:"material-icons"},"delete")),React.createElement(s,{handle:a["delete"]}))}}),o=React.createClass({displayName:"EditProject",render:function(){return React.createElement("a",{onClick:i.setType.bind(null,event,"put"),"data-toggle":"modal","data-target":"#addProject",className:"material-icons"},"edit")}}),l=React.createClass({displayName:"Project",render:function(){return React.createElement("li",{onClick:this.props.onClick.bind(null,this.props.id),className:"","aria-labelledby":"dropdownMenu"},React.createElement("a",null,this.props.name))}}),p=React.createClass({displayName:"ProjectList",mixins:[Reflux.connect(d,"data")],render:function(){var e,t,r,s,i;e=this.state.data.current,i=this.state.data.projects,r=[];for(t in i)s=i[t],r.push(React.createElement(l,{id:t,key:t,name:s.name,onClick:a.changeCurrent}));return React.createElement("div",{className:"btn-group",role:"group","aria-label":"..."},React.createElement("div",{className:"dropdown"},React.createElement("button",{type:"button",className:"btn btn-default dropdown-toggle",id:"dropdownMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},React.createElement("p",null,0!==i.length?i[e].name:void 0,React.createElement("span",{className:"caret"}))),React.createElement("button",{type:"button",className:"btn btn-default"},React.createElement(o,{project:i[e]})),React.createElement(c,null),React.createElement("button",{type:"button",className:"btn btn-default"},React.createElement(n,null)),React.createElement("ul",{className:"dropdown-menu"},r)))}}),t.exports=p},{"../actions/project-list":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project-list.cjsx","../actions/project-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project-modal.cjsx","../stores/project-list":"/home/xhitedev/cremi/cp/scrumy/app/js/stores/project-list.cjsx"}],"/home/xhitedev/cremi/cp/scrumy/app/js/components/project-modal.cjsx":[function(e,t,r){var a,n,s,c,o,i,l,p;a=e("../actions/project-modal"),l=e("../stores/project-modal"),o=e("./modal"),p=React.createClass({displayName:"TextInput",render:function(){return React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:this.props.id},this.props.placeholder),React.createElement("input",{onChange:function(e){return this.props.onChange(e.target.value)}.bind(this),value:this.props.text,type:"text",className:"form-control",id:this.props.id,placeholder:this.props.placeholder,required:this.props.required}))}}),s=React.createClass({displayName:"Member",render:function(){return React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-11"},React.createElement("input",{onChange:function(e){return a.handleMember(this.props.id,e.target.value)}.bind(this),value:this.props.name,type:"text",className:"form-control",placeholder:"Nom"})),React.createElement("div",{className:"col-md-1"},React.createElement("i",{className:"material-icons",onClick:ModalActions.deleteMember.bind(null,this.props.id)},"delete")))}}),c=React.createClass({displayName:"MembersInput",render:function(){var e,t,r,n;t=[],r=this.props.members;for(e in r)n=r[e],t.push(React.createElement(s,{name:n,id:e,key:e}));return React.createElement("div",{className:"form-group"},React.createElement("label",null,"Collaborateurs"),t,React.createElement("i",{className:"material-icons",onClick:a.addMember},"add"))}}),n=React.createClass({displayName:"Form",mixins:[Reflux.connect(l,"project")],render:function(){var e;return e=this.state.project,React.createElement("form",{onSubmit:function(e){return e.preventDefault(),a.submit(e)}},React.createElement(p,{onChange:a.handleName,text:e.name,id:"inputName",placeholder:"Nom",required:"required"}),React.createElement(p,{onChange:a.handleDescription,text:e.description,id:"inputDescription",placeholder:"Description"}),React.createElement(p,{onChange:a.handleRepo,text:e.git_repo,id:"inputRepo",placeholder:"Dépot git"}),React.createElement(c,{members:e.members}),React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Fermer"),React.createElement("button",{type:"submit",className:"btn btn-primary"},"Appliquer"))}}),i=React.createClass({displayName:"ProjectModal",render:function(){return React.createElement(n,null)}}),t.exports=i},{"../actions/project-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project-modal.cjsx","../stores/project-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/stores/project-modal.cjsx","./modal":"/home/xhitedev/cremi/cp/scrumy/app/js/components/modal.cjsx"}],"/home/xhitedev/cremi/cp/scrumy/app/js/components/project.cjsx":[function(e,t,r){var a,n,s,c,o,i;a=e("../actions/project"),c=e("../stores/project"),s=e("./sprint-list"),i=React.createClass({displayName:"TabNav",render:function(){return React.createElement("nav",{role:"navigation"},React.createElement("ul",{className:"nav nav-tabs"},React.createElement("li",{onClick:a.selectBacklog,role:"presentation",className:this.props.backlog?"active":void 0},React.createElement("a",null,"Backlog")),React.createElement("li",{onClick:a.selectSprints,role:"presentation",className:this.props.backlog?void 0:"active"},React.createElement("a",null,"Sprints"))))}}),o=React.createClass({displayName:"TabContent",render:function(){return React.createElement("div",null,this.props.backlog?void 0:React.createElement(s,null))}}),n=React.createClass({displayName:"Project",mixins:[Reflux.connect(c,"data")],render:function(){var e;return e=this.state.data.backlog,React.createElement("div",null,React.createElement(i,{backlog:e}),React.createElement(o,{backlog:e}))}}),t.exports=n},{"../actions/project":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project.cjsx","../stores/project":"/home/xhitedev/cremi/cp/scrumy/app/js/stores/project.cjsx","./sprint-list":"/home/xhitedev/cremi/cp/scrumy/app/js/components/sprint-list.cjsx"}],"/home/xhitedev/cremi/cp/scrumy/app/js/components/sprint-list.cjsx":[function(e,t,r){var a,n,s,c,o;o=e("../stores/sprint-list"),a=e("../actions/sprint-list"),n=e("../actions/sprint-modal"),s=React.createClass({displayName:"Sprint",render:function(){return React.createElement("div",{className:"panel panel-primary"},React.createElement("div",{className:"panel-heading"},this.props.id),React.createElement("div",{className:"panel-body"},this.props.start))}}),c=React.createClass({displayName:"SprintList",mixins:[Reflux.connect(o,"list")],render:function(){var e;return console.log(this.state.list),e=this.state.list.map(function(e){return React.createElement(s,{key:e.id,id:e.id,start:e.start})}),React.createElement("div",{className:"list-group"},React.createElement("button",{type:"button",className:"btn btn-default"},React.createElement("a",{onClick:function(e){return e.preventDefault(),n.add},"data-toggle":"modal","data-target":"#addSprint",className:"material-icons"},"add")),e)}}),t.exports=c},{"../actions/sprint-list":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/sprint-list.cjsx","../actions/sprint-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/sprint-modal.cjsx","../stores/sprint-list":"/home/xhitedev/cremi/cp/scrumy/app/js/stores/sprint-list.cjsx"}],"/home/xhitedev/cremi/cp/scrumy/app/js/components/sprint-modal.cjsx":[function(e,t,r){var a,n,s,c,o,i;o=e("../stores/sprint-modal"),a=e("../actions/sprint-modal"),n=e("./modal"),i=React.createClass({displayName:"TextInput",render:function(){return React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:this.props.id},this.props.placeholder),React.createElement("input",{onChange:function(e){return this.props.onChange(e.target.value)}.bind(this),value:this.props.text,type:"text",className:"form-control",id:this.props.id,placeholder:this.props.placeholder,required:this.props.required}))}}),s=React.createClass({displayName:"SprintForm",mixins:[Reflux.connect(o,"sprint")],render:function(){return React.createElement("form",{onSubmit:function(e){return e.preventDefault(),a.submit(e)}},React.createElement(i,{onChange:a.handleName,text:this.state.sprint.id,id:"inputName",placeholder:"Nom",required:"required"}),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"inputDate"},"Date de début"),React.createElement("input",{onChange:function(e){return a.handleDate(e.target.value)}.bind(this),value:this.state.sprint.start,type:"date",className:"form-control",id:"inputDate",required:"required"})),React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Annuler"),React.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.props.handle},"Appliquer"))}}),c=React.createClass({displayName:"SprintModal",render:function(){return React.createElement(s,null)}}),t.exports=c},{"../actions/sprint-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/sprint-modal.cjsx","../stores/sprint-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/stores/sprint-modal.cjsx","./modal":"/home/xhitedev/cremi/cp/scrumy/app/js/components/modal.cjsx"}],"/home/xhitedev/cremi/cp/scrumy/app/js/main.cjsx":[function(e,t,r){var a,n,s,c,o,i,l,p,d;o=e("./components/project-list"),c=e("./components/project"),n=e("./components/modal-list"),i=e("./components/project-modal"),d=e("./components/sprint-modal"),p=ReactRouter.Router,l=ReactRouter.Route,s=React.createClass({displayName:"Panel",render:function(){return React.createElement("div",null,this.props.children)}}),a=React.createClass({displayName:"Main",render:function(){return React.createElement("div",null,React.createElement(i,null))}}),React.render(React.createElement(a,null),document.getElementById("content"))},{"./components/modal-list":"/home/xhitedev/cremi/cp/scrumy/app/js/components/modal-list.cjsx","./components/project":"/home/xhitedev/cremi/cp/scrumy/app/js/components/project.cjsx","./components/project-list":"/home/xhitedev/cremi/cp/scrumy/app/js/components/project-list.cjsx","./components/project-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/components/project-modal.cjsx","./components/sprint-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/components/sprint-modal.cjsx"}],"/home/xhitedev/cremi/cp/scrumy/app/js/stores/project-list.cjsx":[function(e,t,r){var a,n,s,c;a=e("../actions/project-list"),s=e("../actions/project"),n=e("../actions/project-modal"),c=Reflux.createStore({getInitialState:function(){return this.data},changeCurrent:function(e){var t;return this.data.current=e,this.trigger(this.data),t=this.data.projects[this.data.current],s.setCurrentProject(t),n.setCurrentProject(t)},data:{projects:[],current:0},listenables:[a],srcUrl:"/api/v1/projects",init:function(){return this.fetchList()},"delete":function(){var e,t;return e=this.data.projects[this.data.current]._id,t=superagent,t["delete"](this.srcUrl+"/"+e).end(function(e,t){return t.ok?(delete this.data.projects[this.data.current],this.changeCurrent(0)):void 0}.bind(this))},fetchList:function(){var e;return e=superagent,e.get(this.srcUrl).accept("application/json").end(function(e,t){return t.ok?(this.data.projects=t.body,this.changeCurrent(0)):void 0}.bind(this))}}),t.exports=c},{"../actions/project":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project.cjsx","../actions/project-list":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project-list.cjsx","../actions/project-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project-modal.cjsx"}],"/home/xhitedev/cremi/cp/scrumy/app/js/stores/project-modal.cjsx":[function(e,t,r){var a,n;a=e("../actions/project-modal"),n=Reflux.createStore({listenables:[a],type:"post",newProject:{name:"",description:"",git_repo:"",members:[],backlog:[],sprints:[]},currentProject:{},showedProject:{},intit:function(){return this.showedProject=this.newProject},getInitialState:function(){return this.newProject},setType:function(e,t){return"put"===t?this.showedProject=this.currentProject:this.showedProject=this.newProject,this.type=t,this.trigger(this.showedProject)},setCurrentProject:function(e){return null!=e?this.currentProject=e:void 0},submit:function(e){switch(this.type){case"post":return this.send(e);case"put":return this.update(e);default:return console.log("wrong request type")}},update:function(e){var t;return t=superagent,t.put("/api/v1/project/"+this.currentProject._id).type("json").send(this.currentProject).end(function(e,t){return t.ok?console.log("data updated"):void 0}.bind(this)),$("#addModal").modal("hide")},send:function(e){var t;return t=superagent,t.post("/api/v1/project").type("json").send(this.newProject).end(function(e,t){return console.log(this.newProject),t.ok?console.log("data sent"):void 0}.bind(this)),$("#addModal").modal("hide")},handleName:function(e){return this.newProject.name=e,this.trigger(this.newProject)},handleDescription:function(e){return this.showedProject.description=e,this.trigger(this.showedProject)},handleRepo:function(e){return this.showedProject.git_repo=e,this.trigger(this.showedProject)},handleMember:function(e,t){return this.showedProject.members[e]=t,this.trigger(this.showedProject)},addMember:function(){return this.showedProject.members.push(""),this.trigger(this.showedProject)},deleteMember:function(e){return delete this.showedProject.members[e],this.trigger(this.showedProject)}}),t.exports=n},{"../actions/project-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project-modal.cjsx"}],"/home/xhitedev/cremi/cp/scrumy/app/js/stores/project.cjsx":[function(e,t,r){var a,n,s,c;a=e("../actions/project"),n=e("../actions/project-modal"),c=e("../actions/sprint-list"),s=Reflux.createStore({listenables:[a],data:{project:{},backlog:!0},getInitialState:function(){return this.data},init:function(){return this.trigger(this.data)},selectBacklog:function(){return this.data.backlog=!0,this.trigger(this.data)},selectSprints:function(){return this.data.backlog=!1,this.trigger(this.data)},setCurrentProject:function(e){return console.log(e),this.data.project=e,this.trigger(this.data)}}),t.exports=s},{"../actions/project":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project.cjsx","../actions/project-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/project-modal.cjsx","../actions/sprint-list":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/sprint-list.cjsx"}],"/home/xhitedev/cremi/cp/scrumy/app/js/stores/sprint-list.cjsx":[function(e,t,r){var a,n,s;a=e("../actions/sprint-list"),n=e("../actions/sprint-modal"),s=Reflux.createStore({listenables:[a],list:[],init:function(){return this.fetch()},getInitialState:function(){return this.list},setList:function(e){return this.list=e,this.fetch()},add:function(e){return n.setType(e,"post")},fetch:function(){return this.trigger(this.list)}}),t.exports=s},{"../actions/sprint-list":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/sprint-list.cjsx","../actions/sprint-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/sprint-modal.cjsx"}],"/home/xhitedev/cremi/cp/scrumy/app/js/stores/sprint-modal.cjsx":[function(e,t,r){var a,n;a=e("../actions/sprint-modal"),n=Reflux.createStore({listenables:[a],newSprint:{id:0,start:"",tasks:[],kanban:{id:0,url:""}}},init,{request:"post",currentSprint:{},showedSprint:{},getInitialState:function(){return this.newSprint},add:function(e){return this.request="post",this.showedSprint=this.newSprint,this.trigger(this.showedSprint)},edit:function(e){return this.request="put",this.showedSprint=this.currentSprint,this.trigger(this.showedSprint)},setCurrentSprint:function(e){return this.currentSprint=e},submit:function(e){return console.log(this.request),this.send(e)},update:function(e){var t;return t=superagent,t.put("/api/v1/sprint/"+this.currentSprint._id).type("json").send(this.currentSprint).end(function(e,t){return t.ok?console.log("data updated"):void 0}.bind(this)),$("#addModal").modal("hide")},send:function(e){var t;return this.createKanban(),console.log(this.newSprint.kanban.url),t=superagent,t.post("/api/v1/project").type("json").send(this.newSprint).end(function(e,t){return t.ok?console.log("data sent"):void 0}.bind(this)),$("#addModal").modal("hide")},handleDate:function(e){return this.showedSprint.start=e,this.trigger(this.showedSprint)},handleName:function(e){return this.showedSprint.id=e,this.trigger(this.showedSprint)},trelloLogIn:function(e){var t;return t=function(){return alert("connection to Trello failed")},Trello.authorize({type:"popup",name:"Scrumy Application",scope:{read:!0,write:!0},expiration:"never",success:e,error:t})},createKanban:function(){var e,t;return e=this.showedSprint.kanban,t=function(){var t,r;return t=function(e){return this.board=e.id}.bind(this),r=function(t){return e.id=t.id,e.url=t.url}.bind(this),Trello.post("/boards",{name:this.showedSprint.id+" - "+this.showedSprint.start},t),Trello.post("/lists",{name:"Todo",idBoard:this.board},r),Trello.post("/lists",{name:"Ongoing",idBoard:this.board}),Trello.post("/lists",{name:"Done",idBoard:this.board})}.bind(this),this.trelloLogIn(t)},createCard:function(e){var t;return t=function(){return Trello.post("/cards",{name:e,idList:this.showedSprint.kanban.id,due:null,pos:"top"})}.bind(this),this.trelloLogIn(t)}}),t.exports=n},{"../actions/sprint-modal":"/home/xhitedev/cremi/cp/scrumy/app/js/actions/sprint-modal.cjsx"}]},{},["/home/xhitedev/cremi/cp/scrumy/app/js/main.cjsx"]);